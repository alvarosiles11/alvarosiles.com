{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport React, { Component } from 'react';\nimport { SText, SView, STheme, SThread, SIcon } from 'servisofts-component';\nimport { getDefaultConfig } from '../index';\nimport SSession from './SSession/index';\nimport { connect } from 'react-redux';\nvar SSocket = /** @class */function (_super) {\n  __extends(SSocket, _super);\n  function SSocket(props) {\n    var _this = _super.call(this, props) || this;\n    _this.state = {\n      log: []\n    };\n    _this.initApi();\n    return _this;\n    // var data = require(\"../../../index.js\");\n    // alert(JSON.stringify(data));\n  }\n\n  SSocket.register = function (observado, callback) {\n    SSocket.Observados[observado] = callback;\n  };\n  SSocket.getSession = function () {\n    if (!SSocket.defaultConfig) return null;\n    if (!SSocket.Instance) {\n      SSocket.Instance = new SSession(SSocket.defaultConfig);\n    }\n    return SSocket.Instance;\n  };\n  SSocket.send = function (data) {\n    var _this = this;\n    //TODO: send data to server\n    if (!SSocket.getSession()) {\n      // alert(data.component)\n      return;\n    }\n    if (!SSocket.getSession().isOpen()) {\n      new SThread(100, \"\", true).start(function () {\n        _this.send(data);\n      });\n      return;\n    }\n    return SSocket.getSession().send(data);\n  };\n  SSocket.prototype.componentDidMount = function () {\n    this.initApi();\n    SSocket.getSession().init(this);\n  };\n  SSocket.prototype.initApi = function () {\n    if (!SSocket.defaultConfig) SSocket.defaultConfig = getDefaultConfig();\n    if (SSocket.defaultConfig.ssl) {\n      SSocket.api.root = \"https://\" + SSocket.defaultConfig.host + \"/images/\";\n      SSocket.api.img = \"https://\" + SSocket.defaultConfig.host + \"/img/\";\n      SSocket.api.manejador = \"https://\" + SSocket.defaultConfig.host + \"/manejador/\";\n    } else {\n      SSocket.api.root = \"http://\" + SSocket.defaultConfig.host + \":\" + SSocket.defaultConfig.port.http + \"/\";\n      SSocket.api.img = \"http://\" + SSocket.defaultConfig.host + \":\" + SSocket.defaultConfig.port.http + \"/img/\";\n      SSocket.api.manejador = \"http://\" + SSocket.defaultConfig.host + \":\" + SSocket.defaultConfig.port.http + \"/manejador/\";\n    }\n    Object.keys(SSocket.defaultConfig.apis).map(function (key) {\n      SSocket.api[key] = SSocket.defaultConfig.apis[key];\n    });\n  };\n  // getLogs() {\n  //     return this.state.log.map((item, index) => {\n  //         return <SText fontSize={12} >{\"\\n\"}{item}</SText>\n  //     })\n  // }\n  SSocket.prototype.notifyObserver = function () {\n    var _this = this;\n    Object.keys(SSocket.Observados).forEach(function (key) {\n      SSocket.Observados[key](_this);\n    });\n  };\n  SSocket.prototype.render = function () {\n    this.notifyObserver();\n    // return <></>\n    if (SSocket.getSession().isOpen()) {\n      return null;\n    }\n    return React.createElement(React.Fragment, null);\n    return React.createElement(SView, {\n      style: {\n        width: 200,\n        height: 200,\n        position: \"absolute\",\n        backgroundColor: STheme.color.background + \"aa\",\n        overflow: \"hidden\"\n      },\n      center: true\n    }, React.createElement(SView, {\n      col: \"xs-3 md-2 xl-1\"\n    }, React.createElement(SIcon, {\n      name: \"Wifi\",\n      fill: STheme.color.secondary\n    })), React.createElement(SText, null, \"Conexion perdida\"));\n  };\n  SSocket.defaultConfig = getDefaultConfig();\n  SSocket.Observados = {};\n  SSocket.api = {\n    root: \"\",\n    manejador: \"\",\n    img: \"\",\n    rp: \"\"\n  };\n  SSocket.Instance = null;\n  return SSocket;\n}(Component);\nvar initStates = function (state) {\n  return {\n    state: state\n  };\n};\nexport default connect(initStates)(SSocket);","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","React","Component","SText","SView","STheme","SThread","SIcon","getDefaultConfig","SSession","connect","SSocket","_super","props","_this","state","log","initApi","register","observado","callback","Observados","getSession","defaultConfig","Instance","send","data","isOpen","start","componentDidMount","init","ssl","api","root","host","img","manejador","port","http","keys","apis","map","key","notifyObserver","forEach","render","createElement","Fragment","style","width","height","position","backgroundColor","color","background","overflow","center","col","name","fill","secondary","rp","initStates"],"sources":["/home/alvaro/Documentos/GitHub/alvarosiles.com/app/node_modules/servisofts-socket/SSocket/index.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { Component } from 'react';\nimport { SText, SView, STheme, SThread, SIcon } from 'servisofts-component';\nimport { getDefaultConfig } from '../index';\nimport SSession from './SSession/index';\nimport { connect } from 'react-redux';\nvar SSocket = /** @class */ (function (_super) {\n    __extends(SSocket, _super);\n    function SSocket(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = {\n            log: []\n        };\n        _this.initApi();\n        return _this;\n        // var data = require(\"../../../index.js\");\n        // alert(JSON.stringify(data));\n    }\n    SSocket.register = function (observado, callback) {\n        SSocket.Observados[observado] = callback;\n    };\n    SSocket.getSession = function () {\n        if (!SSocket.defaultConfig)\n            return null;\n        if (!SSocket.Instance) {\n            SSocket.Instance = new SSession(SSocket.defaultConfig);\n        }\n        return SSocket.Instance;\n    };\n    SSocket.send = function (data) {\n        var _this = this;\n        //TODO: send data to server\n        if (!SSocket.getSession()) {\n            // alert(data.component)\n            return;\n        }\n        if (!SSocket.getSession().isOpen()) {\n            new SThread(100, \"\", true).start(function () {\n                _this.send(data);\n            });\n            return;\n        }\n        return SSocket.getSession().send(data);\n    };\n    SSocket.prototype.componentDidMount = function () {\n        this.initApi();\n        SSocket.getSession().init(this);\n    };\n    SSocket.prototype.initApi = function () {\n        if (!SSocket.defaultConfig)\n            SSocket.defaultConfig = getDefaultConfig();\n        if (SSocket.defaultConfig.ssl) {\n            SSocket.api.root = \"https://\" + SSocket.defaultConfig.host + \"/images/\";\n            SSocket.api.img = \"https://\" + SSocket.defaultConfig.host + \"/img/\";\n            SSocket.api.manejador = \"https://\" + SSocket.defaultConfig.host + \"/manejador/\";\n        }\n        else {\n            SSocket.api.root = \"http://\" + SSocket.defaultConfig.host + \":\" + SSocket.defaultConfig.port.http + \"/\";\n            SSocket.api.img = \"http://\" + SSocket.defaultConfig.host + \":\" + SSocket.defaultConfig.port.http + \"/img/\";\n            SSocket.api.manejador = \"http://\" + SSocket.defaultConfig.host + \":\" + SSocket.defaultConfig.port.http + \"/manejador/\";\n        }\n        Object.keys(SSocket.defaultConfig.apis).map(function (key) {\n            SSocket.api[key] = SSocket.defaultConfig.apis[key];\n        });\n    };\n    // getLogs() {\n    //     return this.state.log.map((item, index) => {\n    //         return <SText fontSize={12} >{\"\\n\"}{item}</SText>\n    //     })\n    // }\n    SSocket.prototype.notifyObserver = function () {\n        var _this = this;\n        Object.keys(SSocket.Observados).forEach(function (key) {\n            SSocket.Observados[key](_this);\n        });\n    };\n    SSocket.prototype.render = function () {\n        this.notifyObserver();\n        // return <></>\n        if (SSocket.getSession().isOpen()) {\n            return null;\n        }\n        return React.createElement(React.Fragment, null);\n        return (React.createElement(SView, { style: {\n                width: 200,\n                height: 200,\n                position: \"absolute\",\n                backgroundColor: STheme.color.background + \"aa\",\n                overflow: \"hidden\"\n            }, center: true },\n            React.createElement(SView, { col: \"xs-3 md-2 xl-1\" },\n                React.createElement(SIcon, { name: \"Wifi\", fill: STheme.color.secondary })),\n            React.createElement(SText, null, \"Conexion perdida\")));\n    };\n    SSocket.defaultConfig = getDefaultConfig();\n    SSocket.Observados = {};\n    SSocket.api = {\n        root: \"\",\n        manejador: \"\",\n        img: \"\",\n        rp: \"\"\n    };\n    SSocket.Instance = null;\n    return SSocket;\n}(Component));\nvar initStates = function (state) {\n    return { state: state };\n};\nexport default connect(initStates)(SSocket);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}